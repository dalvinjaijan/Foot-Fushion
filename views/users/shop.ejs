<!DOCTYPE html>
<html lang="zxx" class="no-js">

<head>
	<!-- Mobile Specific Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Favicon-->
	<link rel="shortcut icon" href="img/fav.png">
	<!-- Author Meta -->
	<meta name="author" content="CodePixar">
	<!-- Meta Description -->
	<meta name="description" content="">
	<!-- Meta Keyword -->
	<meta name="keywords" content="">
	<!-- meta character set -->
	<meta charset="UTF-8">
	<!-- Site Title -->
	<title>Foot Fusion</title>

	<!--
            CSS
            ============================================= -->
	<link rel="stylesheet" href="../user-assets/css/linearicons.css">
	<link rel="stylesheet" href="../user-assets/css/owl.carousel.css">
	<link rel="stylesheet" href="../user-assets/css/font-awesome.min.css">
	<link rel="stylesheet" href="../user-assets/css/themify-icons.css">
	<link rel="stylesheet" href="../user-assets/css/nice-select.css">
	<link rel="stylesheet" href="../user-assets/css/nouislider.min.css">
	<link rel="stylesheet" href="../user-assets/css/bootstrap.css">
	<link rel="stylesheet" href="../user-assets/css/main.css">
</head>
<style>
    .tooltip-ellipsis {
  max-width: 200px; /* Adjust the maximum width as needed */
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  position: relative;
  cursor: help;
}

.tooltip-ellipsis::after {
  content: attr(title);
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  padding: 4px 8px;
  background-color: #000;
  color: #fff;
  border-radius: 4px;
  white-space: nowrap;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s;
}

.tooltip-ellipsis:hover::after {
  opacity: 1;
  visibility: visible;
}
.strikethrough {
    text-decoration: line-through;
  }


</style>
<body id="category">

	<!-- Start Header Area -->
    <%- include('../layouts/header.ejs') %>	

	<!-- End Header Area -->
	<!-- Start Banner Area -->

	<!-- End Banner Area -->
	<div class="container" style="margin-top: 165px; margin-bottom: 50px;">
		<div class="row">
			<div class="col-xl-3 col-lg-4 col-md-5">
				<div class="sidebar-categories">
					<div class="head">All Products</div>
					<ul class="main-categories">
							<li class="main-nav-list"><a class="nav-link" href="/shop"><span class="lnr lnr-arrow-right"></span>All Products</a></li>
						</li>
					</ul>
					<div class="head">Browse Categories</div>
					<ul class="main-categories">
						<% category.forEach(function(item) { %>
							<li class="main-nav-list"><a class="nav-link" href="/categoryShop?id=<%= item._id %>"><span class="lnr lnr-arrow-right"></span><%= item.name.toUpperCase() %></a></li>
						</li>
						<% }) %>								
					</ul>
					<div class="head">Price Sort</div>
					<ul class="main-categories">
							<li class="main-nav-list"><a class="nav-link" href="/shop?sort=price_asc"><span class="lnr lnr-arrow-right"></span>Low --> high</a></li>
							<li class="main-nav-list"><a class="nav-link" href="/shop?sort=price_desc"><span class="lnr lnr-arrow-right"></span>HIgh --> Low</a></li>
						</li>
					</ul>
					<div class="head">Price Filter</div>
					<ul class="main-categories">
							<li class="main-nav-list"><a class="nav-link" href="/shop?minPrice=1&&maxPrice=1000"><span class="lnr lnr-arrow-right"></span>₹ 1 to ₹ 1000</a></li>
							<li class="main-nav-list"><a class="nav-link" href="/shop?minPrice=1000&&maxPrice=5000"><span class="lnr lnr-arrow-right"></span>₹ 1000 to ₹ 5000</a></li>
							<li class="main-nav-list"><a class="nav-link" href="/shop?minPrice=5000&&maxPrice=10000"><span class="lnr lnr-arrow-right"></span>₹ 5000 to ₹ 10000</a></li>
							<li class="main-nav-list"><a class="nav-link" href="/shop?minPrice=10000&&maxPrice=100000"><span class="lnr lnr-arrow-right"></span>Above ₹ 10000</a></li>


						</li>
					</ul>
					  <!-- Price range filter section -->

				</div>
				
			</div>
			<div class="col-xl-9 col-lg-8 col-md-7">
				<!-- Start Filter Bar -->
				<div class="filter-bar d-flex flex-wrap align-items-center">
					
					<div class="sorting mr-auto">
						
					</div>
					<div class="pagination">
						<% if (currentPage > 1) { %>
						  <a href="/shop?page=<%= currentPage - 1 %>" class="prev-arrow">
							<i class="fa fa-long-arrow-left" aria-hidden="true"></i>
						  </a>
						<% } %>
					  
						<% for (let i = 1; i <= totalPages; i++) { %>
						  <% if (i === currentPage) { %>
							<a href="/shop?page=<%= i %>" class="active"><%= i %></a>
						  <% } else { %>
							<a href="/shop?page=<%= i %>"><%= i %></a>
						  <% } %>
						<% } %>
					  
						<% if (currentPage < totalPages) { %>
						  <a href="/shop?page=<%= currentPage + 1 %>" class="next-arrow">
							<i class="fa fa-long-arrow-right" aria-hidden="true"></i>
						  </a>
						<% } %>
						</div>
					  
				</div>
				<!-- End Filter Bar -->
				<!-- Start Best Seller -->
				<section class="lattest-product-area pb-40 category-list">
					<div class="row">
						<!-- single product -->
				
						<!-- single product -->
            <% product.forEach((item) => { %>
						<div class="col-lg-4 col-md-6">
							
            
							<div class="single-product">
								<a class="image"href="/productPage?id=<%=item._id %>"><img class="img-fluid" src="../product-images/<%= item.image[0]%>" width="25" height="25" alt="" ></a>
								<div class="product-details">
                  <small><%=item.category.name%></small>
				  <h6 title="<%=item.name %>" class="tooltip-ellipsis"><%=item.name %></h6>

									<div class="price">
									<% if(item.categoryOffer >= item.productOffer && item.categoryOffer!=0){ %>
										<span class="strikethrough"><i class="fa fa-inr" aria-hidden="true"></i><%= item.price %></span>
										<h6><%= item.catOfferPrice %> </h6>
										<% }else if(item.productOffer>0){ %>
									
										<span class="strikethrough"><i class="fa fa-inr" aria-hidden="true"></i><%= item.price %></span>
										<h6><%= item.offerPrice %></h6>
										<% }else{ %>
											<h6><i class="fa fa-inr" aria-hidden="true"> </i> <%= item.price%></h6>
									<% } %>
									</div>
									<div class="prd-bottom">

										<a onclick="addtocart('<%=item._id%>')" class="social-info">
											<span class="ti-bag"></span>
											<p class="hover-text">add to bag</p>
										</a>
										<a onclick="addToWishList('<%=item._id%>')" class="social-info">
											<span class="lnr lnr-heart"></span>
											<p class="hover-text">Wishlist</p>
										</a>
										<a href="/productPage?id=<%=item._id %>" class="social-info">
											<span class="lnr lnr-move"></span>
											<p class="hover-text">view more</p>
										</a>
									</div>
								</div>
							</div>
       
						</div>
            <% }) %>
						<!-- single product -->
				
						<!-- single product -->
						
						<!-- single product -->
					
						<!-- single product -->
					</div>
				</section>
				<!-- End Best Seller -->
				<!-- Start Filter Bar -->
				<div class="filter-bar d-flex flex-wrap align-items-center">
					<div class="sorting mr-auto">
						<select>
							<option value="1">Show 12</option>
							<option value="1">Show 12</option>
							<option value="1">Show 12</option>
						</select>
					</div>
					<div class="pagination">
						<% if (currentPage > 1) { %>
						  <a href="/shop?page=<%= currentPage - 1 %>" class="prev-arrow">
							<i class="fa fa-long-arrow-left" aria-hidden="true"></i>
						  </a>
						<% } %>
					  
						<% for (let i = 1; i <= totalPages; i++) { %>
						  <% if (i === currentPage) { %>
							<a href="/shop?page=<%= i %>" class="active"><%= i %></a>
						  <% } else { %>
							<a href="/shop?page=<%= i %>"><%= i %></a>
						  <% } %>
						<% } %>
					  
						<% if (currentPage < totalPages) { %>
						  <a href="/shop?page=<%= currentPage + 1 %>" class="next-arrow">
							<i class="fa fa-long-arrow-right" aria-hidden="true"></i>
						  </a>
						<% } %>
						</div>
					  
				</div>
				<!-- End Filter Bar -->
			</div>
		</div>
	</div>

	<!-- Start related-product Area -->

	<!-- End related-product Area -->

	<!-- start footer Area -->
	<footer class="footer-area section_gap">
		<div class="container">
		  <div class="row">
			<div class="col-lg-3  col-md-6 col-sm-6">
			  <div class="single-footer-widget">
				<h6>About Us</h6>
				<p>
				  Smart Wrist <br>
				  Brototype <br>
				  Maradu
				</p>
			  </div>
			</div>
			<div class="col-lg-4  col-md-6 col-sm-6">
		   
			</div>
			<div class="col-lg-2 col-md-6 col-sm-6">
			  <div class="single-footer-widget">
				<h6>Follow Us</h6>
				<p>Let us be social</p>
				<div class="footer-social d-flex align-items-center">
				  <a href="#"><i class="fa fa-facebook"></i></a>
				  <a href="#"><i class="fa fa-twitter"></i></a>
				  <a href="#"><i class="fa fa-dribbble"></i></a>
				  <a href="#"><i class="fa fa-behance"></i></a>
				</div>
			  </div>
			</div>
		  </div>
		  <div class="footer-bottom d-flex justify-content-center align-items-center flex-wrap">
			<p class="footer-text m-0"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
	  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
	  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
	  </p>
		  </div>
		</div>
	  </footer>

	<!-- End footer Area -->

	<!-- Modal Quick Product View -->


	<script>
		
		function addtocart(proId) {
		  $.ajax({
			url: '/addToCart/' + proId,
			method: 'POST',
			
			success: (response) => {
			  if (response.status==true) {
				Swal.fire({
				  title: 'Added To Cart',
				  text: 'Your Product has been added to Cart',
				  icon: 'success',
				  timer: 5000
				  
				})
				location.reload()
				
				
			  }else if(response.status=='outOfStock'){
				Swal.fire({
				  title: 'Out of Stock',
				  text: 'Product Out Of Stock',
				  icon: 'error',
				  timer: 5000
				})
			  }
			}
		  })
		}
	</script>


<script>
	function addToWishList(proId) {
		event.preventDefault();
    $.ajax({
      url: '/add-to-wishlist',
      method: 'POST',
      data: {
        proId: proId
      },
      success: (response) => {
        if (response) {
          // Product added to Wishlist successfully
		  Swal.fire({
			position: 'centre',
			icon: 'success',
			title: 'Product added to wish list',
			showConfirmButton: false,
			timer: 1500
			})
          

        } else {
          // Error adding product to Wishlist
          Swal.fire({
            icon: 'error',
            title: 'Product already exist in Wishlist',
            timer: 2000
          });

        }
      }
    })
  }

const cartBadge= document.getElementById('cart-badge')

const cartItemCount = <%= (cart.cartItems.length !== undefined ? cart.cartItems.length : 0) %>;

console.log(cartItemCount,"hkh")
cartBadge.textContent = cartItemCount;


if (cartItemCount === 0) {
  cartBadge.style.display = 'none';
} else {
  cartBadge.style.display = 'block'; // Show the badge if there are items
}





</script>




<script src="../user-assets/js/vendor/jquery-2.2.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
 crossorigin="anonymous"></script>
<script src="../user-assets/js/vendor/bootstrap.min.js"></script>
<script src="../user-assets/js/jquery.ajaxchimp.min.js"></script>
<script src="../user-assets/js/jquery.nice-select.min.js"></script>
<script src="../user-assets/js/jquery.sticky.js"></script>
<script src="../user-assets/js/nouislider.min.js"></script>
<script src="../user-assets/js/jquery.magnific-popup.min.js"></script>
<script src="../user-assets/js/owl.carousel.min.js"></script>
<!--gmaps Js-->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
<script src="../user-assets/js/gmaps.min.js"></script>
<script src="../user-assets/js/main.js"></script>

</body>

</html>